const Discord = require('discord.js');
const client = new Discord.Client();
var prefix ="-"

client.on('ready', () => {
  console.log(`Logged in as ${client.user.tag}!`);
});

client.on('message', msg => {
  if (msg.content === 'ping') {
    msg.reply('Pong!');
  }
});

client.login(process.env.BOT_TOKEN);  //Ù„Ø§ ØªØ­Ø· Ø§Ù„ØªÙˆÙƒÙ† Ø­Ù‚Ùƒ Ù‡Ù†Ø§

client.on('message', msg => {
    if (msg.content === 'Ù‡Ù„Ø§') {
      msg.reply('Ù‡Ù„Ø§ ÙˆØ§Ù„Ù„Ù‡ Ø¨ÙŠÙƒ');
    }
  });

  //ÙƒÙˆØ¯ Ø§Ù„Ø±Ø¯ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
  //By EpicKinG.

  client.on("message", message => {
    if(message.content.startsWith(prefix + "server")) {
        if(!message.member.hasPermission("SEND_MESSAGES")) return message.channel.send("**Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø§Ù„Ø¨Ø±Ù…Ø´Ù† Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„Ø§Ù…Ø± âŒ**");
        const embed = new Discord.RichEmbed()
        .setAuthor(message.guild.name, message.guild.iconURL)
        .setColor("RANDOM")
  
  .addField('**Ø¹Ø¯Ø¯ Ø§Ø¹Ø¶Ø§Ø¡ Ø§Ù„Ø³ÙŠØ±ÙØ± ğŸ‘¤ **' , `${message.guild.memberCount}`)
  .addField('**Ø§ÙˆÙ†Ø± Ø§Ù„Ø³ÙŠØ±ÙØ± ğŸ‘‘**' , `${message.guild.owner.user.username}`)
  .addField(`**Ø§Ù„Ø±ÙˆÙ…Ø§Øª :scroll: **`,true)
  .addField(`# Ø§Ù„ÙƒØªØ§Ø¨ÙŠØ©`, `${message.guild.channels.filter(m => m.type === 'text').size}`)
  .addField( `:loud_sound: Ø§Ù„ØµÙˆØªÙŠØ©`,`${message.guild.channels.filter(m => m.type === 'voice').size}`)
  .addField(`**Ø¹Ø¯Ø¯ Ø§Ù„Ø±ØªØ¨**:briefcase:`,`${message.guild.roles.size}`)
        message.channel.send({embed:embed})
    }
  });

  client.on('message', message => {
          

    if (message.content.startsWith(prefix + "user")) {
              if(!message.channel.guild) return message.reply(`Ù‡Ø°Ø§ Ø§Ù„Ø£Ù…Ø± ÙÙ‚Ø· Ù„ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª âŒ`);

         message.guild.fetchInvites().then(invs => {
let member = client.guilds.get(message.guild.id).members.get(message.author.id);
let personalInvites = invs.filter(i => i.inviter.id === message.author.id);
let inviteCount = personalInvites.reduce((p, v) => v.uses + p, 0);
var moment = require('moment');
var args = message.content.split(" ").slice(1);
let user = message.mentions.users.first();
var men = message.mentions.users.first();
var heg;
if(men) {
heg = men
} else {
heg = message.author
}
var mentionned = message.mentions.members.first();
var h;
if(mentionned) {
h = mentionned
} else {
h = message.member
}
 moment.locale('ar-TN');
var id = new  Discord.RichEmbed()

.setColor("#0a0909")
.setThumbnail(message.author.avatarURL)
.addField(': ØªØ§Ø±ÙŠØ® Ø¯Ø®ÙˆÙ„Ùƒ Ù„Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯',` \`${moment(heg.createdTimestamp).format('YYYY/M/D HH:mm:ss')} \`**\n ${moment(heg.createdTimestamp).fromNow()}**` ,true) 
.addField(': ØªØ§Ø±ÙŠØ® Ø¯Ø®ÙˆÙ„Ùƒ Ù„Ø³ÙŠØ±ÙØ±Ù†Ø§', `\`${moment(h.joinedAt).format('YYYY/M/D HH:mm:ss')}  \` **\n ${moment(h.joinedAt).fromNow()} **`, true)

.setFooter(message.author.username,'https://images-ext-2.discordapp.net/external/JpyzxW2wMRG2874gSTdNTpC_q9AHl8x8V4SMmtRtlVk/https/orcid.org/sites/default/files/files/ID_symbol_B-W_128x128.gif')  
message.channel.sendEmbed(id);
})
}


  
});

client.on('guildMemberAdd', member => {
  let channel = member.guild.channels.find('name', 'welcome');
  let memberavatar = member.user.avatarURL
    if (!channel) return;
  let embed = new Discord.RichEmbed()
      .setColor('RANDOM')
      .setThumbnail(memberavatar)
      .addField('ğŸ½ | name :  ',`${member}`)
      .addField('ğŸ“¢ | Ù†ÙˆØ±Øª Ø§Ù„Ø³ÙŠØ±ÙØ± ÙŠØ§ Ù‚Ù„Ø¨ÙŠ' , `Welcome to the server, ${member}`)
      .addField('ğŸ†” | user :', "**[" + `${member.id}` + "]**" )
              .addField('â¡| Ø§Ù†Øª Ø§Ù„Ø¹Ø¶Ùˆ Ø±Ù‚Ù…',`${member.guild.memberCount}`)
             
                .addField("Name:",`<@` + `${member.id}` + `>`, true)
                   
                                   .addField(' Ø§Ù„Ù€Ø³ÙŠØ±ÙØ±', `${member.guild.name}`,true)
                                     
   .setFooter(`${member.guild.name}`)
      .setTimestamp()
 
    channel.sendEmbed(embed);
  });
  
  client.on('guildMemberRemove', member => {
      var embed = new Discord.RichEmbed()
      .setAuthor(member.user.username, member.user.avatarURL)
      .setThumbnail(member.user.avatarURL)
      .setTitle(`Ø§Ù„Ù„Ù‡ Ù…Ø¹Ø§Ùƒ âœ‹:skin-tone-1: ğŸ˜”`)
      .setDescription(`Ù…Ø¹ Ø§Ù„Ø³Ù„Ø§Ù…Ù‡ ØªØ´Ø±ÙÙ†Ø§ Ø¨Ùƒ âœ‹:skin-tone-1: ğŸ˜” `)
      .addField('ğŸ‘¤   ØªØ¨Ù‚ÙŠ',`**[ ${member.guild.memberCount} ]**`,true)
      .setColor('RED')
      .setFooter(`==== Ù†Ù€Ù€ØªÙ€Ù€Ù…Ù€Ù€Ù†Ù€Ù€Ø¢ Ù„Ù€Ù€ÙƒÙ€Ù€Ù… Ø¢Ø³Ù€Ù€ØªÙ€Ù€Ù…Ù€Ù€Ù€ØªÙ€Ù€Ø¢Ø¹ ====`, 'https://cdn.discordapp.com/attachments/397818254439219217/399292026782351381/shy.png')
  
  var channel =member.guild.channels.find('name', 'welcome')
  if (!channel) return;
  channel.send({embed : embed});
  })

client.on('message', message => {
  if(!message.channel.guild) return;
if(message.content.startsWith('-bc')) {
if(!message.channel.guild) return message.channel.send('**Ù‡Ø°Ø§ Ø§Ù„Ø£Ù…Ø± ÙÙ‚Ø· Ù„Ù„Ø³ÙŠØ±ÙØ±Ø§Øª**').then(m => m.delete(5000));
if(!message.member.hasPermission('ADMINISTRATOR')) return      message.channel.send('**Ù„Ù„Ø£Ø³Ù Ù„Ø§ ØªÙ…ØªÙ„Ùƒ ØµÙ„Ø§Ø­ÙŠØ©** `ADMINISTRATOR`' );
let args = message.content.split(" ").join(" ").slice(2 + prefix.length);
let copy = "Admin";
let request = `Requested By ${message.author.username}`;
if (!args) return message.reply('**ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ ÙƒØªØ§Ø¨Ø© ÙƒÙ„Ù…Ø© Ø§Ùˆ Ø¬Ù…Ù„Ø© Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ø±ÙˆØ¯ÙƒØ§Ø³Øª**');message.channel.send(`**Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø±Ø³Ø§Ù„Ùƒ Ø§Ù„Ø¨Ø±ÙˆØ¯ÙƒØ§Ø³ØªØŸ \nÙ…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¨Ø±ÙˆØ¯ÙƒØ§Ø³Øª:** \` ${args}\``).then(msg => {
msg.react('âœ…')
.then(() => msg.react('âŒ'))
.then(() =>msg.react('âœ…'))

let reaction1Filter = (reaction, user) => reaction.emoji.name === 'âœ…' && user.id === message.author.id;
let reaction2Filter = (reaction, user) => reaction.emoji.name === 'âŒ' && user.id === message.author.id;
let reaction1 = msg.createReactionCollector(reaction1Filter, { time: 12000 });
let reaction2 = msg.createReactionCollector(reaction2Filter, { time: 12000 });
reaction1.on("collect", r => {
message.channel.send(`â˜‘ | Done ... The Broadcast Message Has Been Sent For ${message.guild.members.size} Members`).then(m => m.delete(5000));
message.guild.members.forEach(m => {
var bc = new
Discord.RichEmbed()
.setColor('RANDOM')
.setTitle('Broadcast')
.addField('Server', message.guild.name)
.addField('Sender', message.author.username)
.addField('Message', args)
.setThumbnail(message.author.avatarURL)
.setFooter(copy, client.user.avatarURL);
m.send({ embed: bc })
msg.delete();
})
})
reaction2.on("collect", r => {
message.channel.send(`**Broadcast Canceled.**`).then(m => m.delete(5000));
msg.delete();
})
})
}
});

      client.on('message', message => {
        if (true) {
      if (message.content === '-invite') {
            message.author.send('https://discordapp.com/api/oauth2/authorize?client_id=476452713425666049&permissions=0&scope=bot').catch(e => console.log(e.stack));
      
          }
         } 
        });
      
      
      client.on('message', message => {
           if (message.content === "-invite") {
           let embed = new Discord.RichEmbed()
        .setAuthor(message.author.username)
        .setColor("#9B59B6")
        .addField(" Done | ØªÙ€Ù€Ù€Ù€Ù…" , " |  ØªÙ€Ù€Ù€Ù€Ù… Ø§Ø±Ø³Ù€Ù€Ø§Ù„Ùƒ ÙÙŠ Ø§Ù„Ø®Ù€Ù€Ø§Øµ")
           
           
           
        message.channel.sendEmbed(embed);
          }
      });

      client.on('ready', () => {
        client.user.setActivity("On 4 Servers | -help",{type: 'WATCHING'});
   
   });

client.on('message', async message => {
  let args = message.content.split(" ");
  if(message.content.startsWith(prefix + "mute")) {
    if(!message.member.hasPermission("MANAGE_ROLES")) return message.reply('**Ø£Ù†Øª Ù„Ø§ ØªÙ…Ù„Ùƒ Ø§Ù„Ø®ØµØ§Ø¦Øµ Ø§Ù„Ù„Ø§Ø²Ù…Ø© . ÙŠØ¬Ø¨ ØªÙˆÙØ± Ø®Ø§ØµÙŠØ© `Manage Roles`**').then(msg => {
      msg.delete(3500);
      message.delete(3500);
    });

    if(!message.guild.member(client.user).hasPermission("MANAGE_ROLES")) return message.reply('**Ø£Ù†Ø§ Ù„Ø§ Ø§Ù…Ù„Ùƒ Ø§Ù„Ø®ØµØ§Ø¦Øµ Ø§Ù„ÙƒØ§ÙÙŠØ© . ÙŠÙ„Ø²Ù… Ø®ØµØ§Ø¦Øµ `Manage Roles` Ù„Ù„Ù‚ÙŠØ§Ù… Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø§Ù…Ø±**').then(msg => {
      msg.delete(3500);
      message.delete(3500);
    });

    let mention = message.mentions.members.first();
    if(!mention) return message.reply('**Ù…Ù†Ø´Ù† Ø¹Ø¶Ùˆ Ù„Ø£Ø³ÙƒØ§ØªÙ‡ ( Ù„Ø£Ø¹Ø·Ø§Ø¦Ø© Ù…ÙŠÙˆØª ) ÙƒØªØ§Ø¨ÙŠ**').then(msg => {
      msg.delete(3500);
      message.delete(3500);
    });

    if(mention.highestRole.position >= message.guild.member(message.author).highestRole.positon) return message.reply('**Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø¹Ø·Ø§Ø¡ Ù„Ù…ÙŠÙˆØª Ø´Ø®Øµ Ø±ØªØ¨ØªÙ‡ Ø§Ø¹Ù„Ù‰ Ù…Ù†Ùƒ**').then(msg => {
      msg.delete(3500);
      message.delete(3500);
    });
    if(mention.highestRole.positon >= message.guild.member(client.user).highestRole.positon) return message.reply('**Ù„Ø§ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø§Ø¹Ø·Ø§Ø¡ Ù…ÙŠÙˆØª Ù„Ø´Ø®Øµ Ø±ØªØ¨ØªÙ‡ Ø§Ø¹Ù„Ù‰ Ù…Ù†ÙŠ**').then(msg => {
      msg.delete(3500);
      message.delete(3500);
    });
    if(mention.id === message.author.id) return message.reply('**Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø¹Ø·Ø§Ø¡ Ù…ÙŠÙˆØª  Ù„Ù†ÙØ³Ùƒ**').then(msg => {
      msg.delete(3500);
      message.delete(3500);
    });

    let duration = args[2];
    if(!duration) return message.reply('**Ø­Ø¯Ø¯ ÙˆÙ‚Øª Ø²Ù…Ù†ÙŠ Ù„ÙÙƒ Ø§Ù„Ù…ÙŠÙˆØª Ø¹Ù† Ø§Ù„Ø´Ø®Øµ**').then(msg => {
      msg.delete(3500);
      message.delete(3500);
    });

    if(isNaN(duration)) return message.reply('**Ø­Ø¯Ø¯ ÙˆÙ‚Øª Ø²Ù…Ù†ÙŠ ØµØ­ÙŠØ­**').then(msg => {
      msg.delete(3500);
      message.delete(3500);
    });

    let reason = message.content.split(" ").slice(3).join(" ");
    if(!reason) reason = "ØºÙŠØ± Ù…Ø­Ø¯Ø¯";

    let thisEmbed = new Discord.RichEmbed()
    .setAuthor(mention.user.username, mention.user.avatarURL)
    .setTitle('ØªÙ… Ø§ØºØ·Ø§Ø¦Ùƒ Ù…ÙŠÙˆØª Ø¨Ø³ÙŠØ±ÙØ±')
    .setThumbnail(mention.user.avatarURL)
    .addField('# - Ø§Ù„Ø³ÙŠØ±ÙØ±',message.guild.name,true)
    .addField('# - ØªÙ… Ø§Ø¹Ø·Ø§Ø¦Ùƒ Ù…ÙŠÙˆØª Ø¨ÙˆØ§Ø³Ø·Ø©',message.author,true)
    .addField('# - Ø§Ù„Ø³Ø¨Ø¨',reason)

    let role = message.guild.roles.find('name', 'Muted') || message.guild.roles.get(r => r.name === 'Muted');
    if(!role) try {
      message.guild.createRole({
        name: "Muted",
        permissions: 0
      }).then(r => {
        message.guild.channels.forEach(c => {
          c.overwritePermissions(r , {
            SEND_MESSAGES: false,
            READ_MESSAGES_HISTORY: false,
            ADD_REACTIONS: false
          });
        });
      });
    } catch(e) {
      console.log(e.stack);
    }
    mention.addRole(role).then(() => {
      mention.send(thisEmbed);
      message.channel.send(`**:white_check_mark: ${mention.user.username} muted in the server ! :zipper_mouth:  **  `);
      mention.setMute(true);
    });
    setTimeout(() => {
      if(duration === 0) return;
      if(!mention.has.roles(role)) return;
      mention.setMute(false);
      mention.removeRole(role);
      message.channel.send(`**:white_check_mark: ${mention.user.username} unmuted in the server ! :neutral_face:  **  `);
    },duration * 60000);
  } else if(message.content.startsWith(prefix + "unmute")) {
    let mention = message.mentions.members.first();
    let role = message.guild.roles.find('name', 'Muted') || message.guild.roles.get(r => r.name === 'Muted');
    if(!message.member.hasPermission("MANAGE_ROLES")) return message.reply('**Ø£Ù†Øª Ù„Ø§ ØªÙ…Ù„Ùƒ Ø§Ù„Ø®ØµØ§Ø¦Øµ Ø§Ù„Ù„Ø§Ø²Ù…Ø© . ÙŠØ¬Ø¨ ØªÙˆÙØ± Ø®Ø§ØµÙŠØ© `Manage Roles`**').then(msg => {
      msg.delete(3500);
      message.delete(3500);
    });

    if(!message.guild.member(client.user).hasPermission("MANAGE_ROLES")) return message.reply('**Ø£Ù†Ø§ Ù„Ø§ Ø§Ù…Ù„Ùƒ Ø§Ù„Ø®ØµØ§Ø¦Øµ Ø§Ù„ÙƒØ§ÙÙŠØ© . ÙŠÙ„Ø²Ù… Ø®ØµØ§Ø¦Øµ `Manage Roles` Ù„Ù„Ù‚ÙŠØ§Ù… Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø§Ù…Ø±**').then(msg => {
      msg.delete(3500);
      message.delete(3500);
    });

    if(!mention) return message.reply('**Ù…Ù†Ø´Ù† Ø§Ù„Ø´Ø®Øµ Ù„ÙÙƒ Ø§Ù„Ù…ÙŠÙˆØª Ø¹Ù†Ù‡**').then(msg => {
      msg.delete(3500);
      message.delete(3500);
    });

      mention.removeRole(role);
      mention.setMute(false);
      message.channel.send(`**:white_check_mark: ${mention.user.username} unmuted in the server ! :neutral_face:  **  `);
  }
});

client.on('message', message => {
  if(message.content.startsWith(prefix + "invites")) {
   message.guild.fetchInvites().then(invs => {
     let user = message.mentions.users.first() || message.author
     let personalInvites = invs.filter(i => i.inviter.id === user.id);
     let inviteCount = personalInvites.reduce((p, v) => v.uses + p, 0);
              let mmmmEmbed = new Discord.RichEmbed()
                        .setAuthor(client.user.username)
                        .setThumbnail(message.author.avatarURL)
.addField(` Ù„Ù‚Ø¯ Ù‚Ù…Øª Ø¨Ø¯Ø¹ÙˆØ© :`, ` ${inviteCount} `)
          .setFooter(`- Requested By: ${message.author.tag}`);
          message.channel.send(mmmmEmbed)
});
 }
});

client.on('message', message => {
    if (message.author.codes) return;
    if (!message.content.startsWith(prefix)) return;
  
    let command = message.content.split(" ")[0];
    command = command.slice(prefix.length);
  
    let args = message.content.split(" ").slice(1);
  
    if (command == "ban") {
                 if(!message.channel.guild) return message.reply('** This command only for servers**');
           
    if(!message.guild.member(message.author).hasPermission("BAN_MEMBERS")) return message.reply("**Ø§Ù†Øª Ù„Ø§ ØªÙ…Ù„Ùƒ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ù‡**");
    if(!message.guild.member(client.user).hasPermission("BAN_MEMBERS")) return message.reply("**I Don't Have ` BAN_MEMBERS ` Permission**");
    let user = message.mentions.users.first();
    
    if (message.mentions.users.size < 1) return message.reply("**Ù…Ù†Ø´Ù† Ø´Ø®Øµ**");
    if (!message.guild.member(user)
    .bannable) return message.reply("**ÙŠØ¬Ø¨ Ø§Ù† ØªÙƒÙˆÙ† Ø±ØªØ¨Ø© Ø§Ù„Ø¨ÙˆØª Ø§Ø¹Ù„ÙŠ Ù…Ù† Ø±ØªØ¨Ù‡ Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ù…Ø±Ø§Ø¯ ØªØ¨Ù†ÙŠØ¯Ø©**");
  
  
    message.guild.member(user).ban(7, user);
  
  message.channel.send(`**:white_check_mark: ${user.tag} banned from the server ! :airplane: **  `)
  
  }
  });

client.on('message', message => {
    let args = message.content.split(" ").slice(1);
if (message.content.startsWith(prefix + 'clear')) {
 let args = message.content.split(" ").slice(1)
    let messagecount = parseInt(args);
    if (args > 100) return message.reply("Ø§Ø¹Ù„Ù‰ Ø­Ø¯ Ù„Ù„Ù…Ø³Ø­ Ù‡Ùˆ 100").then(messages => messages.delete(5000))
    if (!messagecount) return message.reply("Ø§Ø§Ø®ØªØ± ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø³Ø­ Ù…Ù† 1-100").then(messages => messages.delete(5000))
    message.channel.fetchMessages({limit: messagecount + 1}).then(messages => message.channel.bulkDelete(messages));
    message.channel.send(`\`${args}\` ØªÙ… Ø§Ù„Ù…Ø³Ø­`).then(messages => messages.delete(5000));
  }
  });

client.on('message', async message => {
  if(message.content.startsWith(prefix + "voicesetup")) {
  if(!message.guild.member(message.author).hasPermissions('MANAGE_CHANNELS')) return message.reply(':x: **Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„ÙƒØ§ÙÙŠØ©**');
  if(!message.guild.member(client.user).hasPermissions(['MANAGE_CHANNELS','MANAGE_ROLES_OR_PERMISSIONS'])) return message.reply(':x: **Ù„ÙŠØ³ Ù…Ø¹ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„ÙƒØ§ÙÙŠØ©**');
  var args = message.content.split(' ').slice(1).join(' ');
  if(args && !args.includes(0)) return message.channel.send(':negative_squared_cross_mark: Â» ÙØ´Ù„ Ø§Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø±ÙˆÙ… Ø§Ù„ØµÙˆØªÙŠ .. __ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ ÙƒØªØ§Ø¨Ø© 0 ÙÙŠ Ø§Ø³Ù… Ø§Ù„Ø±ÙˆÙ…__');
  if(!args) args = `VoiceOnline: [ ${message.guild.members.filter(s => s.voiceChannel).size} ]`;
  message.channel.send(':white_check_mark: Â» ØªÙ… Ø¹Ù…Ù„ Ø§Ù„Ø±ÙˆÙ… Ø§Ù„ØµÙˆØªÙŠ Ø¨Ù†Ø¬Ø§Ø­');
  message.guild.createChannel(`${args.replace(0, message.guild.members.filter(s => s.voiceChannel).size)}`, 'voice').then(c => {
    c.overwritePermissions(message.guild.id, {
      CONNECT: false,
      SPEAK: false
    });
    setInterval(() => {
      c.setName(`${args.replace(0, message.guild.members.filter(s => s.voiceChannel).size)}`).catch(err => {
        if(err) return;
      });
    },3000);
  });
  }
});

client.on('message', message => {
    if(message.content.startsWith(prefix+'help')) {
   const embed = new Discord.RichEmbed()
.setColor('RANDOM')
        .setDescription(`**

â•­â”â”â”â”³â”â”â”â”³â”â”â”³â”â”â”â•®
â”ƒâ•­â”â”â”«â•­â”â•®â”£â”«â”£â”«â•­â”â•®â”ƒ
â”ƒâ•°â”â”â”«â•°â”â•¯â”ƒâ”ƒâ”ƒâ”ƒâ”ƒâ•±â•°â•¯
â”ƒâ•­â”â”â”«â•­â”â”â•¯â”ƒâ”ƒâ”ƒâ”ƒâ•±â•­â•®
â”ƒâ•°â”â”â”«â”ƒâ•±â•±â•­â”«â”£â”«â•°â”â•¯â”ƒâ•­â•®
â•°â”â”â”â”»â•¯â•±â•±â•°â”â”â”»â”â”â”â•¯â•°â•¯
General's Commands. :earth_asia:
-server - Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù† Ø³ÙŠØ±ÙØ±Ùƒ :scroll:
-user - Ù…Ù„Ù Ø­Ù‚Ùƒ :flashlight:
-ban - Ù„ØªØ¨Ù†ÙŠØ¯ Ø´Ø®Øµ ÙÙŠ Ø§Ù„Ø³ÙŠØ±ÙØ± :airplane: 
-mute - Ù„Ø£Ø¹Ø·Ø§Ø¡ Ù…ÙŠÙˆØª Ù„Ø´Ø®Øµ :zipper_mouth: 
-unmute - Ù„ÙÙƒ Ù…ÙŠÙˆØª Ø¹Ù† Ø´Ø®Øµ  :neutral_face: 
-voicesetup - Ø³ÙŠØª ÙÙˆÙŠØ³ Ø§ÙˆÙ† Ù„Ø§ÙŠÙ† :microphone:
-invites - ÙŠØ¹Ø±Ø¶ Ù„Ùƒ ÙƒÙ… Ø¯Ø¹ÙˆØ© Ø¯Ø¹ÙˆØª ÙÙŠ Ø§Ù„Ø³ÙŠØ±ÙØ± :green_book: 
-invite - Ù„Ø¯Ø¹ÙˆØ© Ø§Ù„Ø¨ÙˆØª ÙÙŠ Ø³ÙŠØ±ÙØ±Ùƒ :ledger:
-role Ø§Ù„Ø±ØªØ¨Ø© Ø§Ù„ÙŠ ØªØ¨ÙŠÙ‡Ø§ @Ø§Ø³Ù… Ø§Ù„Ø´Ø®Øµ :busts_in_silhouette: 
        **
        `)
    message.author.send(embed)
}
     
});

client.on('message', msg => {
    if (msg.content === '-help') {
      msg.reply('**Done | ØªÙ€Ù€Ù€Ù€Ù…" , " |  ØªÙ€Ù€Ù€Ù€Ù… Ø§Ø±Ø³Ù€Ù€Ø§Ù„Ùƒ ÙÙŠ Ø§Ù„Ø®Ù€Ù€Ø§Øµ**');
    }
  });

  //ÙƒÙˆØ¯ Ø§Ù„Ø±Ø¯ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
  //By EpicKinG.

client.on("message", message => {

	var args = message.content.split(' ').slice(1); 
	var msg = message.content.toLowerCase();
	if( !message.guild ) return;
	if( !msg.startsWith( prefix + 'role' ) ) return;
	if(!message.member.hasPermission('MANAGE_ROLES')) return message.channel.send(' **__Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ§Øª__**');
	if( msg.toLowerCase().startsWith( prefix + 'rerole' ) ){
		if( !args[0] ) return message.reply( '**:x: ÙŠØ±Ø¬Ù‰ ÙˆØ¶Ø¹ Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ù…Ø±Ø§Ø¯ Ø³Ø­Ø¨ Ù…Ù†Ù‡ Ø§Ù„Ø±ØªØ¨Ø©**' );
		if( !args[1] ) return message.reply( '**:x: ÙŠØ±Ø¬Ù‰ ÙˆØ¶Ø¹ Ø§Ù„Ø±ØªØ¨Ø© Ø§Ù„Ù…Ø±Ø§Ø¯ Ø³Ø­Ø¨Ù‡Ø§ Ù…Ù† Ø§Ù„Ø´Ø®Øµ**' );
		var role = msg.split(' ').slice(2).join(" ").toLowerCase(); 
		var role1 = message.guild.roles.filter( r=>r.name.toLowerCase().indexOf(role)>-1 ).first(); 
		if( !role1 ) return message.reply( '**:x: ÙŠØ±Ø¬Ù‰ ÙˆØ¶Ø¹ Ø§Ù„Ø±ØªØ¨Ø© Ø§Ù„Ù…Ø±Ø§Ø¯ Ø³Ø­Ø¨Ù‡Ø§ Ù…Ù† Ø§Ù„Ø´Ø®Øµ**' );if( message.mentions.members.first() ){
			message.mentions.members.first().removeRole( role1 );
			return message.reply('**:white_check_mark: [ '+role1.name+' ] Ø±ØªØ¨Ø© [ '+args[0]+' ] ØªÙ… Ø³Ø­Ø¨ Ù…Ù† **');
		}
		if( args[0].toLowerCase() == "all" ){
			message.guild.members.forEach(m=>m.removeRole( role1 ))
			return	message.reply('**:white_check_mark: [ '+role1.name+' ] ØªÙ… Ø³Ø­Ø¨ Ù…Ù† Ø§Ù„ÙƒÙ„ Ø±ØªØ¨Ø©**');
		} else if( args[0].toLowerCase() == "bots" ){
			message.guild.members.filter(m=>m.user.bot).forEach(m=>m.removeRole(role1))
			return	message.reply('**:white_check_mark: [ '+role1.name+' ] ØªÙ… Ø³Ø­Ø¨ Ù…Ù† Ø§Ù„Ø¨ÙˆØªØ§Øª Ø±ØªØ¨Ø©**');
		} else if( args[0].toLowerCase() == "humans" ){
			message.guild.members.filter(m=>!m.user.bot).forEach(m=>m.removeRole(role1))
			return	message.reply('**:white_check_mark: [ '+role1.name+' ] ØªÙ… Ø³Ø­Ø¨ Ù…Ù† Ø§Ù„Ø¨Ø´Ø±ÙŠÙŠÙ† Ø±ØªØ¨Ø©**');
		} 	
	} else {
		if( !args[0] ) return message.reply( '**:x: ÙŠØ±Ø¬Ù‰ ÙˆØ¶Ø¹ Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ù…Ø±Ø§Ø¯ Ø§Ø¹Ø·Ø§Ø¦Ù‡Ø§ Ø§Ù„Ø±ØªØ¨Ø©**' );
		if( !args[1] ) return message.reply( '**:x: ÙŠØ±Ø¬Ù‰ ÙˆØ¶Ø¹ Ø§Ù„Ø±ØªØ¨Ø© Ø§Ù„Ù…Ø±Ø§Ø¯ Ø§Ø¹Ø·Ø§Ø¦Ù‡Ø§ Ù„Ù„Ø´Ø®Øµ**' );
		var role = msg.split(' ').slice(2).join(" ").toLowerCase(); 
		var role1 = message.guild.roles.filter( r=>r.name.toLowerCase().indexOf(role)>-1 ).first(); 
		if( !role1 ) return message.reply( '**:x: ÙŠØ±Ø¬Ù‰ ÙˆØ¶Ø¹ Ø§Ù„Ø±ØªØ¨Ø© Ø§Ù„Ù…Ø±Ø§Ø¯ Ø§Ø¹Ø·Ø§Ø¦Ù‡Ø§ Ù„Ù„Ø´Ø®Øµ**' );if( message.mentions.members.first() ){
			message.mentions.members.first().addRole( role1 );
			return message.reply('**:white_check_mark: [ '+role1.name+' ] Ø±ØªØ¨Ø© [ '+args[0]+' ] ØªÙ… Ø§Ø¹Ø·Ø§Ø¡ **');
		}
		if( args[0].toLowerCase() == "all" ){
			message.guild.members.forEach(m=>m.addRole( role1 ))
			return	message.reply('**:white_check_mark: [ '+role1.name+' ] ØªÙ… Ø§Ø¹Ø·Ø§Ø¡ Ø§Ù„ÙƒÙ„ Ø±ØªØ¨Ø©**');
		} else if( args[0].toLowerCase() == "bots" ){
			message.guild.members.filter(m=>m.user.bot).forEach(m=>m.addRole(role1))
			return	message.reply('**:white_check_mark: [ '+role1.name+' ] ØªÙ… Ø§Ø¹Ø·Ø§Ø¡ Ø§Ù„Ø¨ÙˆØªØ§Øª Ø±ØªØ¨Ø©**');
		} else if( args[0].toLowerCase() == "humans" ){
			message.guild.members.filter(m=>!m.user.bot).forEach(m=>m.addRole(role1))
			return	message.reply('**:white_check_mark: [ '+role1.name+' ] ØªÙ… Ø§Ø¹Ø·Ø§Ø¡ Ø§Ù„Ø¨Ø´Ø±ÙŠÙŠÙ† Ø±ØªØ¨Ø©**');
		} 
	} 
});

  const fs = require('fs');
const db = fs.database();

client.on("message", message => {
        if (message.content === "setprefix") {
        if (message.author.id !== "274923685985386496" && !message.member.hasPermission("MANAGE_GUILD")) return message.channel.send(`U don't have permission to do that`);
  let args = message.content.split(" ").slice(1);
        let arg = args.join("").substring(message.length)
        if (!arg) return message.channel.send(`Please add a prefix after command like \`\`${prefix}setprefix &\`\``);
        fs.database().ref('servers/' + message.guild.id).update({
            guildname: message.guild.name,
            guildprefix: arg
        }).catch(function(err) {
            message.channel.send(err + "\n\n\n");
        });
        message.channel.send(`prefix updated ${arg} for ${message.guild.name}`);
    }
});
  
